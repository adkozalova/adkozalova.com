class UniversalTilt{constructor(e,t={}){e.length>0?this.init(e,t):0!==e.length&&(this.element=e,this.settings=this.settings(t),this.reverse=this.settings.reverse?-1:1,this.settings.shine&&this.shine(),this.element.style.transform=`perspective(${this.settings.perspective}px)`,this.addEventListeners())}init(e,t){for(var i=0;i<e.length;i++)new UniversalTilt(e[i],t)}addEventListeners(){window.DeviceMotionEvent&&"ontouchstart"in document.documentElement?(this.onDeviceMoveBind=this.onDeviceMove.bind(this),window.addEventListener("devicemotion",this.onDeviceMoveBind)):"element"===this.settings["position-base"]?(this.onMouseMoveBind=this.onMouseMove.bind(this),this.element.addEventListener("mousemove",this.onMouseMoveBind),this.element.addEventListener("mouseleave",()=>this.onMouseLeave())):"window"===this.settings["position-base"]&&(this.onMouseMoveBind=this.onMouseMove.bind(this),window.addEventListener("mousemove",this.onMouseMoveBind),window.addEventListener("mouseleave",()=>this.onMouseLeave()))}onMouseMove(e){this.event=e,this.updateElementPosition(),window.DeviceMotionEvent&&"ontouchstart"in document.documentElement?this.update():window.requestAnimationFrame(()=>this.update())}onMouseLeave(){window.DeviceMotionEvent&&"ontouchstart"in document.documentElement?this.reset():window.requestAnimationFrame(()=>this.reset())}onDeviceMove(e){this.movementEvent=e,this.update(),this.updateElementPosition()}reset(){this.event={pageX:this.left+this.width/2,pageY:this.top+this.height/2},this.settings.reset&&(this.element.style.transform=`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale(1)`),this.settings.animation&&(this.element.style.transition="all 500ms ease"),this.settings.shine&&!this.settings["shine-save"]&&(this.shineElement.style.transition="all 500ms ease",this.shineElement.style.transform="rotate(180deg) translate3d(-50%, -50%, 0)",this.shineElement.style.opacity="0"),this.settings.shadow&&!this.settings["shadow-save"]&&(this.element.style.boxShadow="0 45px 100px rgba(0, 0, 0, 0)")}getValues(){var e,t,i;window.DeviceMotionEvent&&"ontouchstart"in document.documentElement?(e=Math.round(event.accelerationIncludingGravity.x)/6,t=Math.round(event.accelerationIncludingGravity.y)/6,90===window.orientation?(i=1-t,t=(1+e)/2,e=i/2):-90===window.orientation?(i=1+t,t=(1-e)/2,e=i/2):0===window.orientation?(t=(i=1+t)/2,e=(1+e)/2):180===window.orientation&&(t=(i=1-t)/2,e=(1-e)/2)):("element"===this.settings["position-base"]?(e=(this.event.clientX-this.left)/this.width,t=(this.event.clientY-this.top)/this.height):(e=this.event.clientX/window.innerWidth,t=this.event.clientY/window.innerHeight),e=Math.min(Math.max(e,0),1),t=Math.min(Math.max(t,0),1));var s=(this.settings.max/2-e*this.settings.max).toFixed(2),n=(t*this.settings.max-this.settings.max/2).toFixed(2),o=Math.atan2(.5-e,t-.5)*(180/Math.PI);return{tiltX:this.reverse*s,tiltY:this.reverse*n,percentageX:100*e,percentageY:100*t,angle:o}}updateElementPosition(){let e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}update(){let e=this.getValues();this.settings.animation&&(this.element.style.transition="all 100ms ease"),this.settings.shadow&&(this.boxShadow="0 45px 100px rgba(0, 0, 0, 0.4)"),this.element.style.transform=`perspective(${this.settings.perspective}px)\n    rotateX(${"X"===this.settings.disabled||"x"===this.settings.disabled?0:e.tiltY}deg)\n    rotateY(${"Y"===this.settings.disabled||"y"===this.settings.disabled?0:e.tiltX}deg)\n    scale(${this.settings.scale})`,this.settings.shine&&(this.shineElement.style.transition="all 0ms ease",this.shineElement.style.transform=`rotate(${-e.angle}deg) translate3d(-50%, -50%, 0)`,this.shineElement.style.opacity=`${this.settings["shine-opacity"]}`),this.settings.shadow&&(this.element.style.boxShadow=this.boxShadow),this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:{X:e.tiltX,Y:e.tiltY}}))}shine(){const e=document.createElement("div");e.classList.add("shine");const t=document.createElement("div");t.classList.add("shine-inner"),e.appendChild(t),this.element.appendChild(e),this.shineElementWrapper=this.element.querySelector(".shine"),this.shineElement=this.element.querySelector(".shine-inner"),Object.assign(this.shineElementWrapper.style,{position:"absolute",top:"0",left:"0",height:"100%",width:"100%",overflow:"hidden"}),Object.assign(this.shineElement.style,{position:"absolute",top:"50%",left:"50%","pointer-events":"none","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",width:`${2*this.element.offsetWidth}px`,height:`${2*this.element.offsetWidth}px`,transform:"rotate(180deg) translate3d(-50%, -50%, 0)","transform-origin":"0% 0%",opacity:"0"})}settings(e){let t={"position-base":"element",reset:!0,shadow:!1,"shadow-save":!1,shine:!1,"shine-opacity":0,"shine-save":!1,max:35,perspective:1e3,scale:1,disabled:null,reverse:!1,animation:!0},i={};for(var s in t)if(s in e)i[s]=e[s];else if(this.element.getAttribute(`data-${s}`)){let e=this.element.getAttribute(`data-${s}`);try{i[s]=JSON.parse(e)}catch(t){i[s]=e}}else i[s]=t[s];return i}}if(window.jQuery){window.jQuery.fn.UniversalTilt=function(e){for(var t=0;t<this.length;t++)new UniversalTilt(this[t],e)}}